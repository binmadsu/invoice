<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class permission extends CI_Controller{	public function __construct(){	    parent::__construct();	    is_logged_in();	    $this->load->model('m_permission');	}	/*public function index(){		$data = array();		$this->load->helper(array('form'));	    $this->load->library('form_validation');		if($_SERVER['REQUEST_METHOD'] == 'POST')		{			$this->form_validation->set_rules('roleid', 'Role Name', 'required');			$this->form_validation->set_rules('permission', 'Permission', 'required');			if($this->form_validation->run() == true)	   		{				$this->m_permission->addpage();				$this->session->set_flashdata('msg', 'Record added successfully!');				redirect('admin/permission/listing', 'refresh');			}	 	}	 	//pr($data);die;	   	$this->load->view('role/add_view',$data);	}*/	public function index(){		$this->listing();	}	function listing($offset=0){		$data = array();		$roleid = 0;		$this->load->helper('form');		if($_SERVER['REQUEST_METHOD'] == 'POST')		{			//pr($_POST);die;			$roleid = $this->input->post('user_role');			$permissions = $this->input->post('permissions');			$msg = $this->m_permission->assignpermission($roleid, $permissions);			/*if(!empty($msg)){			   $this->session->set_flashdata('msg', 'Record Updated successfully');			}*/		}		$data['roleid'] = $roleid;		$data['roles'] = $this->m_permission->GetRoles();		$data['permissionGroup'] = $this->m_permission->listing();		//pr($data);die;		$this->load->view('admin/header');		$this->load->view('admin/dasboardheader');		$this->load->view('permission/view_listing', $data);	}	//edit pages	function edit($id)	{		$data_title = array();		$data = array();		$this->load->library('form_validation');		if(!empty($_POST)){			$this->form_validation->set_rules('role_name', 'Title', 'required');		}				if($this->form_validation->run() == true)		{			$msg = $this->m_permission->index($id,$data_title);			if(!empty($msg)){			   $this->session->set_flashdata('msg', 'Record Updated successfully');			}			redirect('/admin/role/listing/'.$page.'/');		}else{			//$data['gallery'] = gethandoverCategories();			$data['datarows'] = $this->m_permission->page_info($id);			/*echo "<pre>";print_r($data);die;*/			$this->load->view('role/edit_view',$data);		}	}	/*function delete($pageid){		if($this->m_permission->delete($pageid))			$this->session->set_flashdata('msg', 'Record Deleted successfully');		redirect('/admin/role/listing/','refresh');	}	function status($id,$status){		if($this->m_permission->status($id,$status))			$this->session->set_flashdata('msg', 'Record Updated successfully');		redirect('/admin/role/listing/','refresh');	}	function priority()	{		$id=$_GET['id'];		$priority=$_GET['p'];		$this->m_permission->Updatepriority($id,$priority);	}*/}