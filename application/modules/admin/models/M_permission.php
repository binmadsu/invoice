<?php class m_permission extends CI_Model{		private $tbl_name = 'tbl_permissions';	function listing()	{		return $this->getRolePermissions();	}	function getRolePermissions()	{		$this->db->select('p.id,p.permission,p.permission_label As Label, p.module');		$this->db->from('tbl_permissions p');		$this->db->order_by('p.id','ASC');		$result = $this->db->get();		//echo $this->db->last_query();		$permissions = array();		$counter = 0;		foreach($result->result() as $row)		{			$perm['id'] = $row->id;			$perm['permission'] =  $row->permission;			$perm['label'] =  $row->Label;			$perm['module'] =  $row->module;			$permissions[$row->module][] = $perm;			$counter++;		}		return $permissions;	}	//assign role and permissions	function assignpermission($roleid, $permissions)	{		$msg = 0;		$this->db->delete('tbl_role_permissions', array('roleid' => $roleid));		foreach ($permissions as $key => $permissionId) {			$data = array('roleid' => $roleid, 'permissionid' => $permissionId);			$this->db->insert('tbl_role_permissions', $data);		}	}	/*function edit()	{		$is_logged_in = $this->session->userdata('logged_in');		$data = array('m_id' => $this->input->post('module_id'),			'c_name' => $this->input->post('module_name'),			'c_controller_name' =>$this->input->post('controller_name'),			'c_function' => $this->input->post('method_name'),			'c_description' => $this->input->post('desc'),		);		//echo'<pre>';print_r($data);echo'</pre>'; die;		$msg = 0;		$this->db->where('c_id',$id );	    $this->db->update('tbl_capabilities', $data);		//echo $this->db->last_query();die;		$msg = ($this->db->affected_rows() > 0) ? 2 : 3;//for update : for nothing happened		return  $msg;	}*/	function GetRolesById($roleid=0)	{		$this->db->select('tbl_roles.*');		$this->db->from('tbl_roles');		$this->db->where('id',$roleid);		$query = $this->db->get();		//echo $this->db->last_query();		return $query->result_array();	}	function GetRoles(){		$query = $this->db->where('id != 1')->get('tbl_roles');		$role[''] = "Select Role*";		foreach($query->result() as $row){			$role[$row->id] =  ucfirst($row->role_name);		}		return $role;	}	function roleNameFromId($id){		$row = $this->db->select('role_name')		->get_where('tbl_roles',array('id' => $id))->row();		return is_object($row)?$row->role_name.' '.$row->role_name:false;	}}?>