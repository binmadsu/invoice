<link href="<?php echo base_url(); ?>assets/css/table-responsive.css" rel="stylesheet"><div class="contentpanel">  <div class="row">    <div class="col-md-12">      	<h3><i class="fa fa-angle-right"></i> Set Role Permissions</h3>		<?php echo showmsg($this->session->flashdata('msg'));?>		<?php $attributes = array('class' => 'form-horizontal style-form input_from_custom', 'id' => 'permission-form', 'name' => 'permission-form');?>			<?php echo form_open(current_url(), $attributes );?>			<?php if(validation_errors()!=''){?>				<div class="alert alert-danger">					<?php if( isset($error)) print($error);?>					<?php echo validation_errors();?>				</div>			<?php }?>			<div class="col-sm-3">				<div class="form-group">					<label class="col-sm-2 col-sm-2 control-label">Role<span class="red_asterisk">*</span></label>					<div class="col-sm-10">						<?php $selectrole = (!isset($roleid))?0:$roleid;?>						<?php $js = 'class="required form-control" id="user_role"'; ?>						<?php echo form_dropdown('user_role',$roles,$selectrole,$js);?>					</div>				</div>			</div>			<div class="col-sm-12">			<div class="form-group">				<label class="col-sm-2 col-sm-2 control-label">Permission<span class="red_asterisk">*</span></label>				<div class="col-sm-10">					<?php //print_r($permissions);?>					<?php 					//print_r($permissionGroup);					if(!empty($permissionGroup) and count($permissionGroup) > 0)					{						foreach($permissionGroup as $groupName => $permissionData)						{							$permissions = $permissionData;						?>						<div class="col-sm-3">							<ol type='A'>								<?php 									foreach($permissions as $val){?>								<li>									<label><input type="checkbox" name="permissions[]" value="<?php echo $val['id'];?>" class="chkmodule" id="module-<?php echo $val['id'];?>" /> <?php echo ucwords($val['label']); ?></label>									<?php /* 									<label><input type="checkbox" name="permission[<?php echo $val['module'];?>][<?php echo $val['permission'];?>]" value="<?php echo $val['id'];?>" class="module" id="module-<?php echo $val['id'];?>" /> <?php echo ucwords($val['label']); ?></label><br>									*/?>									<?php 									/*if(is_array($val['arr']) && (count($val['arr'])>0)) {?><ol type="i">									<?php foreach($val['arr'] as $mvc)									{										$action=($mvc['actionName']=='index')?'Add':$mvc['actionName'];?>										<?php  $modulename =Strtolower($mvc['moduleName'].'_'.$mvc['actionName']);?>											<li><input type="checkbox" <?php checkuserrole($modulename,$findpermission); ?> name="<?php echo $mvc['moduleName']; ?>[<?php echo $action; ?>]" value="<?php echo $modulename; ?>" class="sub-module-<?php echo $val['m_id'];  ?>" /> <?php  echo $mvc['Label']; ?></li>									<?php }?>									</ol>									<?php  } */?>								</li>								<?php } // permissions loop ?>							</ol>						</div>					<?php }}?>				</div>			</div>			</div>			<div class="col-sm-3">				<div class="form-group">				  <label class="col-sm-2 col-sm-2 control-label"></label>				  <div class="col-sm-10">					  <button class="btn btn-theme custom_blue_btn"  name="save" type="submit">Save</button>				  </div>				</div>			</div>          </form>		</div>  </div></div><?php $this->load->view('admin/footer');?><script>  $(document).ready(function(){  	$("#permission-form").validate({        rules: {          user_role: {            required: true,            //minlength: 1,maxlength: 10,            //digits: true,          }        },        messages: {          user_role : "Select Role.",          /*ticket_count: {            required: "Please enter number of tickets.",            digits: "Please enter digits."          },*/      }    });      	<?php if($selectrole){?>setRolePermissions('<?php echo $selectrole?>');<?php }?>  	$('#user_role').on('change', function(e){  		var rid = $(this).val();  		setRolePermissions(rid);  	});  	function setRolePermissions(rid){  		$.ajax({		  type: "POST",		  url: baseUrl+'ajax/getRolePermissions',		  data: {roleid:rid},		  dataType: "json",		  success: function( data, textStatus, jQxhr ){		  	//console.dir(data);		  	$('.chkmodule').attr('checked', false);		  	$.each(data,function (index, objData) {		  		//console.dir(objData);			  	$('input:checkbox[value="' + objData.id + '"]').attr('checked', true);		  	});		  },		  error: function( jqXhr, textStatus, errorThrown ){		        console.log( errorThrown );		    }		});  	}  });</script>